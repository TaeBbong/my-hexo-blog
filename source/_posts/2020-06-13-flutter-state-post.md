---
title: "[오늘의 플러터] 플러터 상태관리 바이블"
date: 2020-06-13 15:28:12
tags:
excerpt: "오늘의 플러터 공부"
category:
  - 개발
  - Flutter
tag:
  - Flutter
  - State
  - setState
  - Provider
  - BloC
  - 상태관리
---

플러터는 대세 프론트엔드 프레임워크입니다. 예전보다 플러터에 관심 갖는 분들이 많아짐을 느끼고 있는데, 요즘 프론트엔드 프레임워크와 뗄 수 없는 내용이 바로 `상태관리`라고 생각합니다. 상태와 상태관리는 플러터 프론트엔드 개발에서 핵심적인 부분이며, 이를 위한 다양한 도구가 있습니다. 본 포스트에서는 아주 기본적인 개념과 가장 쉬운 예시를 통해 플러터의 대표적인 상태관리 기법들(`setState`, `Provider`, `BloC`)에 대해 정리해보겠습니다.
<!-- more -->

## 상태
상태를 아주 간단히 이해해봅시다. 상태란 (언제든) 바뀔 수 있는 데이터입니다! 뭔가 거창한 것 같은 이름인데 별게 없습니다ㅎㅎ.. 그림으로 좀 더 자세히 확인해보겠습니다. 

<img src="/images/blog/flutterstate1.png" style="border: 1px">

해당 이미지는 플러터 공식 홈페이지에 있는 상태에 대한 예시 이미지입니다. 보시면 별 모양 버튼으로 찜하기를 할 것 같은 이미지 구성인데요, 

<img src="/images/blog/flutterstate2.png" style="border: 1px">

상기 이미지 대로 별을 누르면 빨간색으로 색칠이 되면서 41, 다시 누르면 흰색이 되면서 40이 되는 걸 볼 수 있습니다. SNS 앱에서 흔히 보이는 좋아요 패턴이죠!

그렇다면 위 기능을 구현하기 위해서는 무엇이 필요할까요? 서버와의 통신이고 데이터 저장이고 그런 복잡한 것은 빼고 생각해보면, 찜하기가 눌렸는지 안눌렸는지에 대한 정보가 필요할 것입니다. 그래야 앱이 현재 찜하기가 눌린 상태라면 색칠된 별 모양과 증가된 카운트 수를 보여줄 것이며, 찜하기가 눌리지 않은 상태라면 흰 별 모양과 감소된 카운트 수를 보여주겠죠. 

이러한 찜하기 기능은 언제든 눌릴 수 있기 때문에 눌릴 때마다 페이지가 새로고침 된다던지 그러면 불편하겠죠? 즉 눌려졌는지를 잘 기록하고 있고, 그 값의 변화에 따라서 즉각적으로 새로운 모양을 보여줄 수 있도록 하는 것이 상태에 대한 기본적인 내용입니다. 

위와 같은 예시를 플러터로 작성하려면 `StatefulWidget` 을 활용해야 합니다. 플러터에서는 기본적으로 `StatelessWidget` 과 `StatefulWidget` 을 상속받아 여러 종류의 위젯 클래스를 만들 수 있는데, 변화하는 상태가 있는 위젯은 `StatefulWidget`, 그렇지 않은, 한번 로드되면 변하지 않는 정적인 위젯은 `StatelessWidget` 로 만들게 됩니다.

